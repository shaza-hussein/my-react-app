{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState } from \"react\";\nimport { resetPassword } from \"../API/Auth\";\nimport { validateResetPasswordForm } from \"../Utils/validateForm\";\nimport { useNavigate } from \"react-router-dom\";\nexport default function useResetPasswordForm({\n  phone_number,\n  otp_code\n}) {\n  _s();\n  const [values, setValues] = useState({\n    password: \"\",\n    password_confirmation: \"\"\n  });\n  const [error, setError] = useState(\"\");\n  const [success, setSuccess] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const navigate = useNavigate();\n  const handleChange = e => {\n    setValues(prev => ({\n      ...prev,\n      [e.target.name]: e.target.value\n    }));\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setError(\"\");\n    setSuccess(\"\");\n    const errors = validateResetPasswordForm(values);\n    if (Object.keys(errors).length > 0) {\n      setError(Object.values(errors).join(\"، \"));\n      return;\n    }\n    setLoading(true);\n    try {\n      await resetPassword({\n        phone_number,\n        otp_code,\n        password: values.password,\n        password_confirmation: values.password_confirmation\n      });\n      setSuccess(\"تم تعيين كلمة المرور بنجاح! سيتم تحويلك لتسجيل الدخول...\");\n      setTimeout(() => navigate(\"/login\"), 2000);\n    } catch (err) {\n      let msg = \"فشل تعيين كلمة المرور. حاول مرة أخرى.\";\n      if (err.response && err.response.data) {\n        if (typeof err.response.data === \"string\") {\n          msg = err.response.data;\n        } else if (typeof err.response.data === \"object\") {\n          msg = Object.values(err.response.data).flat().join(\"، \");\n        }\n      }\n      setError(msg);\n    } finally {\n      setLoading(false);\n    }\n  };\n  return {\n    values,\n    handleChange,\n    handleSubmit,\n    error,\n    success,\n    loading\n  };\n}\n_s(useResetPasswordForm, \"DbInBiBBXe8eyCnV/4VBcJRJhlQ=\", false, function () {\n  return [useNavigate];\n});","map":{"version":3,"names":["useState","resetPassword","validateResetPasswordForm","useNavigate","useResetPasswordForm","phone_number","otp_code","_s","values","setValues","password","password_confirmation","error","setError","success","setSuccess","loading","setLoading","navigate","handleChange","e","prev","target","name","value","handleSubmit","preventDefault","errors","Object","keys","length","join","setTimeout","err","msg","response","data","flat"],"sources":["C:/Users/shaza/Desktop/test for NO/src/Hooks/useResetPasswordForm.js"],"sourcesContent":["import { useState } from \"react\";\r\nimport { resetPassword } from \"../API/Auth\";\r\nimport { validateResetPasswordForm } from \"../Utils/validateForm\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nexport default function useResetPasswordForm({ phone_number, otp_code }) {\r\n  const [values, setValues] = useState({ password: \"\", password_confirmation: \"\" });\r\n  const [error, setError] = useState(\"\");\r\n  const [success, setSuccess] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const navigate = useNavigate();\r\n\r\n  const handleChange = (e) => {\r\n    setValues((prev) => ({ ...prev, [e.target.name]: e.target.value }));\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setError(\"\");\r\n    setSuccess(\"\");\r\n    const errors = validateResetPasswordForm(values);\r\n    if (Object.keys(errors).length > 0) {\r\n      setError(Object.values(errors).join(\"، \"));\r\n      return;\r\n    }\r\n    setLoading(true);\r\n    try {\r\n      await resetPassword({\r\n        phone_number,\r\n        otp_code,\r\n        password: values.password,\r\n        password_confirmation: values.password_confirmation\r\n      });\r\n      setSuccess(\"تم تعيين كلمة المرور بنجاح! سيتم تحويلك لتسجيل الدخول...\");\r\n      setTimeout(() => navigate(\"/login\"), 2000);\r\n    } catch (err) {\r\n      let msg = \"فشل تعيين كلمة المرور. حاول مرة أخرى.\";\r\n      if (err.response && err.response.data) {\r\n        if (typeof err.response.data === \"string\") {\r\n          msg = err.response.data;\r\n        } else if (typeof err.response.data === \"object\") {\r\n          msg = Object.values(err.response.data).flat().join(\"، \");\r\n        }\r\n      }\r\n      setError(msg);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return {\r\n    values,\r\n    handleChange,\r\n    handleSubmit,\r\n    error,\r\n    success,\r\n    loading\r\n  };\r\n} "],"mappings":";AAAA,SAASA,QAAQ,QAAQ,OAAO;AAChC,SAASC,aAAa,QAAQ,aAAa;AAC3C,SAASC,yBAAyB,QAAQ,uBAAuB;AACjE,SAASC,WAAW,QAAQ,kBAAkB;AAE9C,eAAe,SAASC,oBAAoBA,CAAC;EAAEC,YAAY;EAAEC;AAAS,CAAC,EAAE;EAAAC,EAAA;EACvE,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGT,QAAQ,CAAC;IAAEU,QAAQ,EAAE,EAAE;IAAEC,qBAAqB,EAAE;EAAG,CAAC,CAAC;EACjF,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGb,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACc,OAAO,EAAEC,UAAU,CAAC,GAAGf,QAAQ,CAAC,EAAE,CAAC;EAC1C,MAAM,CAACgB,OAAO,EAAEC,UAAU,CAAC,GAAGjB,QAAQ,CAAC,KAAK,CAAC;EAC7C,MAAMkB,QAAQ,GAAGf,WAAW,CAAC,CAAC;EAE9B,MAAMgB,YAAY,GAAIC,CAAC,IAAK;IAC1BX,SAAS,CAAEY,IAAI,KAAM;MAAE,GAAGA,IAAI;MAAE,CAACD,CAAC,CAACE,MAAM,CAACC,IAAI,GAAGH,CAAC,CAACE,MAAM,CAACE;IAAM,CAAC,CAAC,CAAC;EACrE,CAAC;EAED,MAAMC,YAAY,GAAG,MAAOL,CAAC,IAAK;IAChCA,CAAC,CAACM,cAAc,CAAC,CAAC;IAClBb,QAAQ,CAAC,EAAE,CAAC;IACZE,UAAU,CAAC,EAAE,CAAC;IACd,MAAMY,MAAM,GAAGzB,yBAAyB,CAACM,MAAM,CAAC;IAChD,IAAIoB,MAAM,CAACC,IAAI,CAACF,MAAM,CAAC,CAACG,MAAM,GAAG,CAAC,EAAE;MAClCjB,QAAQ,CAACe,MAAM,CAACpB,MAAM,CAACmB,MAAM,CAAC,CAACI,IAAI,CAAC,IAAI,CAAC,CAAC;MAC1C;IACF;IACAd,UAAU,CAAC,IAAI,CAAC;IAChB,IAAI;MACF,MAAMhB,aAAa,CAAC;QAClBI,YAAY;QACZC,QAAQ;QACRI,QAAQ,EAAEF,MAAM,CAACE,QAAQ;QACzBC,qBAAqB,EAAEH,MAAM,CAACG;MAChC,CAAC,CAAC;MACFI,UAAU,CAAC,0DAA0D,CAAC;MACtEiB,UAAU,CAAC,MAAMd,QAAQ,CAAC,QAAQ,CAAC,EAAE,IAAI,CAAC;IAC5C,CAAC,CAAC,OAAOe,GAAG,EAAE;MACZ,IAAIC,GAAG,GAAG,uCAAuC;MACjD,IAAID,GAAG,CAACE,QAAQ,IAAIF,GAAG,CAACE,QAAQ,CAACC,IAAI,EAAE;QACrC,IAAI,OAAOH,GAAG,CAACE,QAAQ,CAACC,IAAI,KAAK,QAAQ,EAAE;UACzCF,GAAG,GAAGD,GAAG,CAACE,QAAQ,CAACC,IAAI;QACzB,CAAC,MAAM,IAAI,OAAOH,GAAG,CAACE,QAAQ,CAACC,IAAI,KAAK,QAAQ,EAAE;UAChDF,GAAG,GAAGN,MAAM,CAACpB,MAAM,CAACyB,GAAG,CAACE,QAAQ,CAACC,IAAI,CAAC,CAACC,IAAI,CAAC,CAAC,CAACN,IAAI,CAAC,IAAI,CAAC;QAC1D;MACF;MACAlB,QAAQ,CAACqB,GAAG,CAAC;IACf,CAAC,SAAS;MACRjB,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;EAED,OAAO;IACLT,MAAM;IACNW,YAAY;IACZM,YAAY;IACZb,KAAK;IACLE,OAAO;IACPE;EACF,CAAC;AACH;AAACT,EAAA,CArDuBH,oBAAoB;EAAA,QAKzBD,WAAW;AAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}