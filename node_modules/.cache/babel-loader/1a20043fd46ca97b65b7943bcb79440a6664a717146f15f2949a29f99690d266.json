{"ast":null,"code":"import { refreshToken } from '../API';\nimport { sessionManager } from '../Config/cookies';\n\n// ÿßÿ≥ÿ™ÿÆÿ±ÿßÿ¨ ÿ±ÿ≥ÿßŸÑÿ© ÿßŸÑÿÆÿ∑ÿ£ ŸÖŸÜ ÿßÿ≥ÿ™ÿ¨ÿßÿ®ÿ© ÿßŸÑÿ®ÿßŸÉ ÿ•ŸÜÿØ\nconst extractErrorMessage = data => {\n  console.log('üîç ÿßÿ≥ÿ™ÿÆÿ±ÿßÿ¨ ÿ±ÿ≥ÿßŸÑÿ© ÿßŸÑÿÆÿ∑ÿ£ ŸÖŸÜ:', data);\n\n  // ÿ•ÿ∞ÿß ŸÉÿßŸÜ ŸáŸÜÿßŸÉ ÿ±ÿ≥ÿßŸÑÿ© ÿÆÿ∑ÿ£ ŸÖÿ®ÿßÿ¥ÿ±ÿ©\n  if (typeof data === 'string') {\n    console.log('‚úÖ ÿ±ÿ≥ÿßŸÑÿ© ÿÆÿ∑ÿ£ ŸÖÿ®ÿßÿ¥ÿ±ÿ©:', data);\n    return data;\n  }\n\n  // ÿ•ÿ∞ÿß ŸÉÿßŸÜ ŸáŸÜÿßŸÉ ÿ±ÿ≥ÿßŸÑÿ© ÿÆÿ∑ÿ£ ŸÖÿ≠ÿØÿØÿ©\n  if (data.message) {\n    console.log('‚úÖ ÿ±ÿ≥ÿßŸÑÿ© ÿÆÿ∑ÿ£ ŸÖÿ≠ÿØÿØÿ©:', data.message);\n    return data.message;\n  }\n\n  // ÿ•ÿ∞ÿß ŸÉÿßŸÜ ŸáŸÜÿßŸÉ ÿ±ÿ≥ÿßŸÑÿ© ÿÆÿ∑ÿ£ ÿ®ÿßŸÑŸÑÿ∫ÿ© ÿßŸÑÿπÿ±ÿ®Ÿäÿ©\n  if (data.message_ar) {\n    console.log('‚úÖ ÿ±ÿ≥ÿßŸÑÿ© ÿÆÿ∑ÿ£ ÿπÿ±ÿ®Ÿäÿ©:', data.message_ar);\n    return data.message_ar;\n  }\n\n  // ÿ•ÿ∞ÿß ŸÉÿßŸÜ ŸáŸÜÿßŸÉ ÿ£ÿÆÿ∑ÿßÿ° ŸÅŸä ÿßŸÑÿ≠ŸÇŸàŸÑ (Django REST Framework style)\n  if (data.errors) {\n    const errorMessages = [];\n\n    // ÿßŸÑÿ™ÿπÿßŸÖŸÑ ŸÖÿπ ÿ£ÿÆÿ∑ÿßÿ° ÿßŸÑÿ≠ŸÇŸàŸÑ\n    Object.keys(data.errors).forEach(field => {\n      const fieldErrors = data.errors[field];\n      if (Array.isArray(fieldErrors)) {\n        errorMessages.push(...fieldErrors);\n      } else if (typeof fieldErrors === 'string') {\n        errorMessages.push(fieldErrors);\n      }\n    });\n    if (errorMessages.length > 0) {\n      const message = errorMessages.join(', ');\n      console.log('‚úÖ ÿ±ÿ≥ÿßŸÑÿ© ÿÆÿ∑ÿ£ ŸÖŸÜ ÿßŸÑÿ≠ŸÇŸàŸÑ:', message);\n      return message;\n    }\n  }\n\n  // ÿ•ÿ∞ÿß ŸÉÿßŸÜ ŸáŸÜÿßŸÉ ÿ£ÿÆÿ∑ÿßÿ° ŸÅŸä ÿßŸÑÿ≠ŸÇŸàŸÑ \n  if (data.error) {\n    console.log('‚úÖ ÿ±ÿ≥ÿßŸÑÿ© ÿÆÿ∑ÿ£ ÿπÿßŸÖÿ©:', data.error);\n    return data.error;\n  }\n\n  // ÿ•ÿ∞ÿß ŸÉÿßŸÜ ŸáŸÜÿßŸÉ ÿ™ŸÅÿßÿµŸäŸÑ\n  if (data.detail) {\n    console.log('‚úÖ ÿ±ÿ≥ÿßŸÑÿ© ÿÆÿ∑ÿ£ ÿ™ŸÅÿµŸäŸÑŸäÿ©:', data.detail);\n    return data.detail;\n  }\n\n  // ÿ•ÿ∞ÿß ŸÉÿßŸÜ ŸáŸÜÿßŸÉ ŸÇÿßÿ¶ŸÖÿ© ÿ£ÿÆÿ∑ÿßÿ°\n  if (Array.isArray(data)) {\n    const message = data.join(', ');\n    console.log('‚úÖ ÿ±ÿ≥ÿßŸÑÿ© ÿÆÿ∑ÿ£ ŸÖŸÜ ÿßŸÑŸÇÿßÿ¶ŸÖÿ©:', message);\n    return message;\n  }\n\n  // ÿ•ÿ∞ÿß ŸÉÿßŸÜ ŸáŸÜÿßŸÉ ÿ±ÿ≥ÿßŸÑÿ© ÿÆÿ∑ÿ£ ŸÅŸä non_field_errors (Django)\n  if (data.non_field_errors) {\n    const message = data.non_field_errors.join(', ');\n    console.log('‚úÖ ÿ±ÿ≥ÿßŸÑÿ© ÿÆÿ∑ÿ£ ŸÖŸÜ non_field_errors:', message);\n    return message;\n  }\n  console.log('‚ùå ŸÑŸÖ Ÿäÿ™ŸÖ ÿßŸÑÿπÿ´Ÿàÿ± ÿπŸÑŸâ ÿ±ÿ≥ÿßŸÑÿ© ÿÆÿ∑ÿ£');\n  return null;\n};\n\n// ŸÖÿπÿßŸÑÿ¨ÿ© ÿ£ÿÆÿ∑ÿßÿ° API - ÿßÿ≥ÿ™ÿÆÿ±ÿßÿ¨ ÿ±ÿ≥ÿßŸÑÿ© ÿßŸÑÿÆÿ∑ÿ£ ŸÖŸÜ ÿßŸÑÿ®ÿßŸÉ ÿ•ŸÜÿØ ŸÅŸÇÿ∑\nexport const handleApiError = error => {\n  var _error$response, _error$response2, _error$response3, _error$response4;\n  console.log('‚ùå ÿÆÿ∑ÿ£ ŸÅŸä API:', error);\n  console.log('üîç ÿ™ŸÅÿßÿµŸäŸÑ ÿßŸÑÿÆÿ∑ÿ£:', {\n    status: (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status,\n    statusText: (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.statusText,\n    data: (_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.data,\n    message: error.message\n  });\n\n  // ÿ•ÿ∞ÿß ŸÉÿßŸÜ ŸáŸÜÿßŸÉ ÿßÿ≥ÿ™ÿ¨ÿßÿ®ÿ© ŸÖŸÜ ÿßŸÑÿÆÿßÿØŸÖ\n  if ((_error$response4 = error.response) !== null && _error$response4 !== void 0 && _error$response4.data) {\n    console.log('üîç ŸÖÿ≠ÿßŸàŸÑÿ© ÿßÿ≥ÿ™ÿÆÿ±ÿßÿ¨ ÿ±ÿ≥ÿßŸÑÿ© ÿßŸÑÿÆÿ∑ÿ£ ŸÖŸÜ ÿßÿ≥ÿ™ÿ¨ÿßÿ®ÿ© ÿßŸÑÿÆÿßÿØŸÖ...');\n    const errorMessage = extractErrorMessage(error.response.data);\n    if (errorMessage) {\n      console.log('‚úÖ ÿ™ŸÖ ÿßÿ≥ÿ™ÿÆÿ±ÿßÿ¨ ÿ±ÿ≥ÿßŸÑÿ© ÿßŸÑÿÆÿ∑ÿ£:', errorMessage);\n      return errorMessage;\n    }\n  }\n\n  // ÿ•ÿ∞ÿß ŸÉÿßŸÜ ŸáŸÜÿßŸÉ ÿ±ÿ≥ÿßŸÑÿ© ÿÆÿ∑ÿ£ ŸÅŸä error.message\n  if (error.message) {\n    // ÿ™ÿ¨ÿßŸáŸÑ ÿ±ÿ≥ÿßÿ¶ŸÑ axios ÿßŸÑÿπÿßŸÖÿ©\n    if (!error.message.includes('Network Error') && !error.message.includes('timeout') && !error.message.includes('Request failed')) {\n      console.log('‚úÖ ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿ±ÿ≥ÿßŸÑÿ© ÿßŸÑÿÆÿ∑ÿ£ ŸÖŸÜ error.message:', error.message);\n      return error.message;\n    }\n  }\n\n  // ÿ•ÿ∞ÿß ŸÑŸÖ ŸäŸÉŸÜ ŸáŸÜÿßŸÉ ÿßÿ≥ÿ™ÿ¨ÿßÿ®ÿ© ŸÖŸÜ ÿßŸÑÿÆÿßÿØŸÖ\n  if (!error.response) {\n    console.log('‚ùå ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿßÿ≥ÿ™ÿ¨ÿßÿ®ÿ© ŸÖŸÜ ÿßŸÑÿÆÿßÿØŸÖ');\n    return 'ŸÅÿ¥ŸÑ ŸÅŸä ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ÿßŸÑÿÆÿßÿØŸÖÿå Ÿäÿ±ÿ¨Ÿâ ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßÿ™ÿµÿßŸÑ ÿßŸÑÿ•ŸÜÿ™ÿ±ŸÜÿ™';\n  }\n\n  // ÿ•ÿ∞ÿß ŸÑŸÖ ŸÜÿ™ŸÖŸÉŸÜ ŸÖŸÜ ÿßÿ≥ÿ™ÿÆÿ±ÿßÿ¨ ÿ±ÿ≥ÿßŸÑÿ© ÿÆÿ∑ÿ£ÿå ŸÜÿπÿ±ÿ∂ ÿ±ÿ≥ÿßŸÑÿ© ÿπÿßŸÖÿ©\n  console.log('‚ùå ŸÑŸÖ ŸÜÿ™ŸÖŸÉŸÜ ŸÖŸÜ ÿßÿ≥ÿ™ÿÆÿ±ÿßÿ¨ ÿ±ÿ≥ÿßŸÑÿ© ÿÆÿ∑ÿ£');\n  return 'ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ÿ∫Ÿäÿ± ŸÖÿ™ŸàŸÇÿπÿå Ÿäÿ±ÿ¨Ÿâ ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿ© ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ';\n};\n\n// ŸÖÿπÿßŸÑÿ¨ÿ© ÿÆÿ∑ÿ£ 401 (ÿ∫Ÿäÿ± ŸÖÿµÿ±ÿ≠)\nexport const handleUnauthorizedError = async (error, originalRequest, axiosInstance) => {\n  console.log('üîÑ ÿ®ÿØÿ° ŸÖÿπÿßŸÑÿ¨ÿ© ÿÆÿ∑ÿ£ 401...');\n\n  // ÿ•ÿ∞ÿß ŸÑŸÖ ŸÜŸÉŸÜ ŸÇÿØ ÿ≠ÿßŸàŸÑŸÜÿß ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ™ŸàŸÉŸÜ ŸÖŸÜ ŸÇÿ®ŸÑ\n  if (!originalRequest._retry) {\n    originalRequest._retry = true;\n    console.log('üîÑ ŸÖÿ≠ÿßŸàŸÑÿ© ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ™ŸàŸÉŸÜ ŸÑŸÑŸÖÿ±ÿ© ÿßŸÑÿ£ŸàŸÑŸâ...');\n    try {\n      const session = sessionManager.restoreSession();\n      const refreshTokenValue = session === null || session === void 0 ? void 0 : session.refreshToken;\n      console.log('üîç ŸÅÿ≠ÿµ refresh token:', {\n        hasSession: !!session,\n        hasRefreshToken: !!refreshTokenValue\n      });\n      if (refreshTokenValue) {\n        console.log('üîÑ ŸÖÿ≠ÿßŸàŸÑÿ© ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ™ŸàŸÉŸÜ...');\n\n        // ÿ∑ŸÑÿ® ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ™ŸàŸÉŸÜ\n        const response = await refreshToken(refreshTokenValue);\n        console.log('‚úÖ ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ™ŸàŸÉŸÜ ÿ®ŸÜÿ¨ÿßÿ≠');\n\n        // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ™ŸàŸÉŸÜÿ≤ ŸÅŸä ÿßŸÑŸÉŸàŸÉŸäÿ≤\n        sessionManager.saveSession({\n          access: response.access,\n          refresh: response.refresh,\n          user: session.userData\n        });\n\n        // ÿ•ÿπÿßÿØÿ© ÿßŸÑÿ∑ŸÑÿ® ÿßŸÑÿ£ÿµŸÑŸä ŸÖÿπ ÿßŸÑÿ™ŸàŸÉŸÜ ÿßŸÑÿ¨ÿØŸäÿØ\n        originalRequest.headers.Authorization = `Bearer ${response.access}`;\n        console.log('‚úÖ ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ™ŸàŸÉŸÜ Ÿàÿ•ÿπÿßÿØÿ© ÿßŸÑÿ∑ŸÑÿ®');\n        return axiosInstance(originalRequest);\n      } else {\n        console.log('‚ùå ŸÑÿß ŸäŸàÿ¨ÿØ refresh token');\n        handleRefreshTokenFailure();\n      }\n    } catch (refreshError) {\n      console.log('‚ùå ŸÅÿ¥ŸÑ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ™ŸàŸÉŸÜ:', refreshError);\n      handleRefreshTokenFailure();\n    }\n  } else {\n    console.log('‚ùå ÿ™ŸÖÿ™ ŸÖÿ≠ÿßŸàŸÑÿ© ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ™ŸàŸÉŸÜ ŸÖŸÜ ŸÇÿ®ŸÑ');\n  }\n\n  // ÿ•ÿ∞ÿß ŸÅÿ¥ŸÑ ÿßŸÑÿ™ÿ≠ÿØŸäÿ´ ÿ£Ÿà ÿ™ŸÖÿ™ ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿ© ŸÖŸÜ ŸÇÿ®ŸÑ\n  handleRefreshTokenFailure();\n  return Promise.reject(error);\n};\n\n// ŸÖÿπÿßŸÑÿ¨ÿ© ŸÅÿ¥ŸÑ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ™ŸàŸÉŸÜ\nexport const handleRefreshTokenFailure = () => {\n  console.log('üßπ ÿ≠ÿ∞ŸÅ ÿßŸÑÿ¨ŸÑÿ≥ÿ© ÿ®ÿ≥ÿ®ÿ® ŸÅÿ¥ŸÑ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ™ŸàŸÉŸÜ');\n  sessionManager.clearSession();\n  console.log('‚úÖ ÿ™ŸÖ ÿ≠ÿ∞ŸÅ ÿßŸÑÿ¨ŸÑÿ≥ÿ© ŸÖŸÜ ÿßŸÑŸÉŸàŸÉŸäÿ≤');\n\n  // ÿ•ÿ±ÿ≥ÿßŸÑ ÿ≠ÿØÿ´ ŸÑÿ≠ÿ∞ŸÅ ÿßŸÑÿ¨ŸÑÿ≥ÿ©\n  window.dispatchEvent(new CustomEvent('sessionExpired'));\n  console.log('‚úÖ ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ≠ÿØÿ´ ÿßŸÜÿ™Ÿáÿßÿ° ÿßŸÑÿ¨ŸÑÿ≥ÿ©');\n};\n\n// ŸÖÿπÿßŸÑÿ¨ÿ© ÿ£ÿÆÿ∑ÿßÿ° ÿπÿßŸÖÿ©\nexport const handleError = error => {\n  var _error$response5, _error$response6, _error$response7, _error$response8;\n  console.log('‚ùå ÿÆÿ∑ÿ£ ŸÅŸä ÿßŸÑÿ∑ŸÑÿ®:', error);\n  console.log('üîç ÿ™ŸÅÿßÿµŸäŸÑ ÿßŸÑÿÆÿ∑ÿ£:', {\n    status: (_error$response5 = error.response) === null || _error$response5 === void 0 ? void 0 : _error$response5.status,\n    statusText: (_error$response6 = error.response) === null || _error$response6 === void 0 ? void 0 : _error$response6.statusText,\n    data: (_error$response7 = error.response) === null || _error$response7 === void 0 ? void 0 : _error$response7.data,\n    message: error.message\n  });\n  if (((_error$response8 = error.response) === null || _error$response8 === void 0 ? void 0 : _error$response8.status) === 401) {\n    console.log('üö´ ÿÆÿ∑ÿ£ 401 - ÿ∫Ÿäÿ± ŸÖÿµÿ±ÿ≠ÿå ÿ≠ÿ∞ŸÅ ÿßŸÑÿ¨ŸÑÿ≥ÿ©...');\n    handleRefreshTokenFailure();\n  }\n  return Promise.reject(error);\n};\n\n// Ÿáÿ∞ÿß ÿßŸÑŸÇÿØŸäŸÖ ŸÇÿ®ŸÑ ŸÖÿß ÿ™ŸÜŸÇŸÑŸä ŸÖŸÉÿßŸÜ ÿßŸÑŸÖŸÑŸÅ ŸÖŸÜ config\n// import { refreshToken } from '../API/Auth';\n// import { tokenManager, sessionManager } from './cookies';\n\n// // ŸÖÿπÿßŸÑÿ¨ÿ© ÿÆÿ∑ÿ£ 401 (ÿ∫Ÿäÿ± ŸÖÿµÿ±ÿ≠)\n// export const handleUnauthorizedError = async (error, originalRequest, axiosInstance) => {\n//   // ÿ•ÿ∞ÿß ŸÑŸÖ ŸÜŸÉŸÜ ŸÇÿØ ÿ≠ÿßŸàŸÑŸÜÿß ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ™ŸàŸÉŸÜ ŸÖŸÜ ŸÇÿ®ŸÑ\n//   if (!originalRequest._retry) {\n//     originalRequest._retry = true;\n\n//     try {\n//       const refreshTokenValue = tokenManager.getRefreshToken();\n//       if (refreshTokenValue) {\n//         console.log('üîÑ ŸÖÿ≠ÿßŸàŸÑÿ© ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ™ŸàŸÉŸÜ...');\n\n//         // ÿ∑ŸÑÿ® ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ™ŸàŸÉŸÜ\n//         const response = await refreshToken(refreshTokenValue);\n\n//         // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ™ŸàŸÉŸÜÿ≤ ŸÅŸä ÿßŸÑŸÉŸàŸÉŸäÿ≤\n//         tokenManager.updateTokens(response.access, response.refresh);\n\n//         // ÿ•ÿπÿßÿØÿ© ÿßŸÑÿ∑ŸÑÿ® ÿßŸÑÿ£ÿµŸÑŸä ŸÖÿπ ÿßŸÑÿ™ŸàŸÉŸÜ ÿßŸÑÿ¨ÿØŸäÿØ\n//         originalRequest.headers.Authorization = `Bearer ${response.access}`;\n//         console.log('‚úÖ ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ™ŸàŸÉŸÜ Ÿàÿ•ÿπÿßÿØÿ© ÿßŸÑÿ∑ŸÑÿ®');\n\n//         return axiosInstance(originalRequest);\n//       }\n//     } catch (refreshError) {\n//       console.log('‚ùå ŸÅÿ¥ŸÑ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ™ŸàŸÉŸÜ:', refreshError);\n//       handleRefreshTokenFailure();\n//     }\n//   }\n\n//   // ÿ•ÿ∞ÿß ŸÅÿ¥ŸÑ ÿßŸÑÿ™ÿ≠ÿØŸäÿ´ ÿ£Ÿà ÿ™ŸÖÿ™ ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿ© ŸÖŸÜ ŸÇÿ®ŸÑ\n//   handleRefreshTokenFailure();\n//   return Promise.reject(error);\n// };\n\n// // ŸÖÿπÿßŸÑÿ¨ÿ© ŸÅÿ¥ŸÑ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ™ŸàŸÉŸÜ\n// export const handleRefreshTokenFailure = () => {\n//   console.log('üßπ ÿ≠ÿ∞ŸÅ ÿßŸÑÿ¨ŸÑÿ≥ÿ© ÿ®ÿ≥ÿ®ÿ® ŸÅÿ¥ŸÑ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ™ŸàŸÉŸÜ');\n//   sessionManager.clearSession();\n\n//   // ÿ•ÿ±ÿ≥ÿßŸÑ ÿ≠ÿØÿ´ ŸÑÿ≠ÿ∞ŸÅ ÿßŸÑÿ¨ŸÑÿ≥ÿ©\n//   window.dispatchEvent(new CustomEvent('sessionExpired'));\n// };\n\n// // ŸÖÿπÿßŸÑÿ¨ÿ© ÿ£ÿÆÿ∑ÿßÿ° ÿπÿßŸÖÿ©\n// export const handleError = (error) => {\n//   console.log('‚ùå ÿÆÿ∑ÿ£ ŸÅŸä ÿßŸÑÿ∑ŸÑÿ®:', error);\n\n//   if (error.response?.status === 401) {\n//     handleRefreshTokenFailure();\n//   }\n\n//   return Promise.reject(error);\n// };","map":{"version":3,"names":["refreshToken","sessionManager","extractErrorMessage","data","console","log","message","message_ar","errors","errorMessages","Object","keys","forEach","field","fieldErrors","Array","isArray","push","length","join","error","detail","non_field_errors","handleApiError","_error$response","_error$response2","_error$response3","_error$response4","status","response","statusText","errorMessage","includes","handleUnauthorizedError","originalRequest","axiosInstance","_retry","session","restoreSession","refreshTokenValue","hasSession","hasRefreshToken","saveSession","access","refresh","user","userData","headers","Authorization","handleRefreshTokenFailure","refreshError","Promise","reject","clearSession","window","dispatchEvent","CustomEvent","handleError","_error$response5","_error$response6","_error$response7","_error$response8"],"sources":["C:/Users/shaza/Desktop/test for NO/src/Utils/errorHandler.js"],"sourcesContent":["import { refreshToken } from '../API';\r\nimport { sessionManager } from '../Config/cookies';\r\n\r\n// ÿßÿ≥ÿ™ÿÆÿ±ÿßÿ¨ ÿ±ÿ≥ÿßŸÑÿ© ÿßŸÑÿÆÿ∑ÿ£ ŸÖŸÜ ÿßÿ≥ÿ™ÿ¨ÿßÿ®ÿ© ÿßŸÑÿ®ÿßŸÉ ÿ•ŸÜÿØ\r\nconst extractErrorMessage = (data) => {\r\n  console.log('üîç ÿßÿ≥ÿ™ÿÆÿ±ÿßÿ¨ ÿ±ÿ≥ÿßŸÑÿ© ÿßŸÑÿÆÿ∑ÿ£ ŸÖŸÜ:', data);\r\n  \r\n  // ÿ•ÿ∞ÿß ŸÉÿßŸÜ ŸáŸÜÿßŸÉ ÿ±ÿ≥ÿßŸÑÿ© ÿÆÿ∑ÿ£ ŸÖÿ®ÿßÿ¥ÿ±ÿ©\r\n  if (typeof data === 'string') {\r\n    console.log('‚úÖ ÿ±ÿ≥ÿßŸÑÿ© ÿÆÿ∑ÿ£ ŸÖÿ®ÿßÿ¥ÿ±ÿ©:', data);\r\n    return data;\r\n  }\r\n  \r\n  // ÿ•ÿ∞ÿß ŸÉÿßŸÜ ŸáŸÜÿßŸÉ ÿ±ÿ≥ÿßŸÑÿ© ÿÆÿ∑ÿ£ ŸÖÿ≠ÿØÿØÿ©\r\n  if (data.message) {\r\n    console.log('‚úÖ ÿ±ÿ≥ÿßŸÑÿ© ÿÆÿ∑ÿ£ ŸÖÿ≠ÿØÿØÿ©:', data.message);\r\n    return data.message;\r\n  }\r\n  \r\n  // ÿ•ÿ∞ÿß ŸÉÿßŸÜ ŸáŸÜÿßŸÉ ÿ±ÿ≥ÿßŸÑÿ© ÿÆÿ∑ÿ£ ÿ®ÿßŸÑŸÑÿ∫ÿ© ÿßŸÑÿπÿ±ÿ®Ÿäÿ©\r\n  if (data.message_ar) {\r\n    console.log('‚úÖ ÿ±ÿ≥ÿßŸÑÿ© ÿÆÿ∑ÿ£ ÿπÿ±ÿ®Ÿäÿ©:', data.message_ar);\r\n    return data.message_ar;\r\n  }\r\n  \r\n  // ÿ•ÿ∞ÿß ŸÉÿßŸÜ ŸáŸÜÿßŸÉ ÿ£ÿÆÿ∑ÿßÿ° ŸÅŸä ÿßŸÑÿ≠ŸÇŸàŸÑ (Django REST Framework style)\r\n  if (data.errors) {\r\n    const errorMessages = [];\r\n    \r\n    // ÿßŸÑÿ™ÿπÿßŸÖŸÑ ŸÖÿπ ÿ£ÿÆÿ∑ÿßÿ° ÿßŸÑÿ≠ŸÇŸàŸÑ\r\n    Object.keys(data.errors).forEach(field => {\r\n      const fieldErrors = data.errors[field];\r\n      if (Array.isArray(fieldErrors)) {\r\n        errorMessages.push(...fieldErrors);\r\n      } else if (typeof fieldErrors === 'string') {\r\n        errorMessages.push(fieldErrors);\r\n      }\r\n    });\r\n    \r\n    if (errorMessages.length > 0) {\r\n      const message = errorMessages.join(', ');\r\n      console.log('‚úÖ ÿ±ÿ≥ÿßŸÑÿ© ÿÆÿ∑ÿ£ ŸÖŸÜ ÿßŸÑÿ≠ŸÇŸàŸÑ:', message);\r\n      return message;\r\n    }\r\n  }\r\n  \r\n  // ÿ•ÿ∞ÿß ŸÉÿßŸÜ ŸáŸÜÿßŸÉ ÿ£ÿÆÿ∑ÿßÿ° ŸÅŸä ÿßŸÑÿ≠ŸÇŸàŸÑ \r\n  if (data.error) {\r\n    console.log('‚úÖ ÿ±ÿ≥ÿßŸÑÿ© ÿÆÿ∑ÿ£ ÿπÿßŸÖÿ©:', data.error);\r\n    return data.error;\r\n  }\r\n  \r\n  // ÿ•ÿ∞ÿß ŸÉÿßŸÜ ŸáŸÜÿßŸÉ ÿ™ŸÅÿßÿµŸäŸÑ\r\n  if (data.detail) {\r\n    console.log('‚úÖ ÿ±ÿ≥ÿßŸÑÿ© ÿÆÿ∑ÿ£ ÿ™ŸÅÿµŸäŸÑŸäÿ©:', data.detail);\r\n    return data.detail;\r\n  }\r\n  \r\n  // ÿ•ÿ∞ÿß ŸÉÿßŸÜ ŸáŸÜÿßŸÉ ŸÇÿßÿ¶ŸÖÿ© ÿ£ÿÆÿ∑ÿßÿ°\r\n  if (Array.isArray(data)) {\r\n    const message = data.join(', ');\r\n    console.log('‚úÖ ÿ±ÿ≥ÿßŸÑÿ© ÿÆÿ∑ÿ£ ŸÖŸÜ ÿßŸÑŸÇÿßÿ¶ŸÖÿ©:', message);\r\n    return message;\r\n  }\r\n  \r\n  // ÿ•ÿ∞ÿß ŸÉÿßŸÜ ŸáŸÜÿßŸÉ ÿ±ÿ≥ÿßŸÑÿ© ÿÆÿ∑ÿ£ ŸÅŸä non_field_errors (Django)\r\n  if (data.non_field_errors) {\r\n    const message = data.non_field_errors.join(', ');\r\n    console.log('‚úÖ ÿ±ÿ≥ÿßŸÑÿ© ÿÆÿ∑ÿ£ ŸÖŸÜ non_field_errors:', message);\r\n    return message;\r\n  }\r\n  \r\n  console.log('‚ùå ŸÑŸÖ Ÿäÿ™ŸÖ ÿßŸÑÿπÿ´Ÿàÿ± ÿπŸÑŸâ ÿ±ÿ≥ÿßŸÑÿ© ÿÆÿ∑ÿ£');\r\n  return null;\r\n};\r\n\r\n// ŸÖÿπÿßŸÑÿ¨ÿ© ÿ£ÿÆÿ∑ÿßÿ° API - ÿßÿ≥ÿ™ÿÆÿ±ÿßÿ¨ ÿ±ÿ≥ÿßŸÑÿ© ÿßŸÑÿÆÿ∑ÿ£ ŸÖŸÜ ÿßŸÑÿ®ÿßŸÉ ÿ•ŸÜÿØ ŸÅŸÇÿ∑\r\nexport const handleApiError = (error) => {\r\n  console.log('‚ùå ÿÆÿ∑ÿ£ ŸÅŸä API:', error);\r\n  console.log('üîç ÿ™ŸÅÿßÿµŸäŸÑ ÿßŸÑÿÆÿ∑ÿ£:', {\r\n    status: error.response?.status,\r\n    statusText: error.response?.statusText,\r\n    data: error.response?.data,\r\n    message: error.message\r\n  });\r\n  \r\n  // ÿ•ÿ∞ÿß ŸÉÿßŸÜ ŸáŸÜÿßŸÉ ÿßÿ≥ÿ™ÿ¨ÿßÿ®ÿ© ŸÖŸÜ ÿßŸÑÿÆÿßÿØŸÖ\r\n  if (error.response?.data) {\r\n    console.log('üîç ŸÖÿ≠ÿßŸàŸÑÿ© ÿßÿ≥ÿ™ÿÆÿ±ÿßÿ¨ ÿ±ÿ≥ÿßŸÑÿ© ÿßŸÑÿÆÿ∑ÿ£ ŸÖŸÜ ÿßÿ≥ÿ™ÿ¨ÿßÿ®ÿ© ÿßŸÑÿÆÿßÿØŸÖ...');\r\n    const errorMessage = extractErrorMessage(error.response.data);\r\n    if (errorMessage) {\r\n      console.log('‚úÖ ÿ™ŸÖ ÿßÿ≥ÿ™ÿÆÿ±ÿßÿ¨ ÿ±ÿ≥ÿßŸÑÿ© ÿßŸÑÿÆÿ∑ÿ£:', errorMessage);\r\n      return errorMessage;\r\n    }\r\n  }\r\n  \r\n  // ÿ•ÿ∞ÿß ŸÉÿßŸÜ ŸáŸÜÿßŸÉ ÿ±ÿ≥ÿßŸÑÿ© ÿÆÿ∑ÿ£ ŸÅŸä error.message\r\n  if (error.message) {\r\n    // ÿ™ÿ¨ÿßŸáŸÑ ÿ±ÿ≥ÿßÿ¶ŸÑ axios ÿßŸÑÿπÿßŸÖÿ©\r\n    if (!error.message.includes('Network Error') && \r\n        !error.message.includes('timeout') &&\r\n        !error.message.includes('Request failed')) {\r\n      console.log('‚úÖ ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿ±ÿ≥ÿßŸÑÿ© ÿßŸÑÿÆÿ∑ÿ£ ŸÖŸÜ error.message:', error.message);\r\n      return error.message;\r\n    }\r\n  }\r\n  \r\n  // ÿ•ÿ∞ÿß ŸÑŸÖ ŸäŸÉŸÜ ŸáŸÜÿßŸÉ ÿßÿ≥ÿ™ÿ¨ÿßÿ®ÿ© ŸÖŸÜ ÿßŸÑÿÆÿßÿØŸÖ\r\n  if (!error.response) {\r\n    console.log('‚ùå ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿßÿ≥ÿ™ÿ¨ÿßÿ®ÿ© ŸÖŸÜ ÿßŸÑÿÆÿßÿØŸÖ');\r\n    return 'ŸÅÿ¥ŸÑ ŸÅŸä ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ÿßŸÑÿÆÿßÿØŸÖÿå Ÿäÿ±ÿ¨Ÿâ ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßÿ™ÿµÿßŸÑ ÿßŸÑÿ•ŸÜÿ™ÿ±ŸÜÿ™';\r\n  }\r\n  \r\n  // ÿ•ÿ∞ÿß ŸÑŸÖ ŸÜÿ™ŸÖŸÉŸÜ ŸÖŸÜ ÿßÿ≥ÿ™ÿÆÿ±ÿßÿ¨ ÿ±ÿ≥ÿßŸÑÿ© ÿÆÿ∑ÿ£ÿå ŸÜÿπÿ±ÿ∂ ÿ±ÿ≥ÿßŸÑÿ© ÿπÿßŸÖÿ©\r\n  console.log('‚ùå ŸÑŸÖ ŸÜÿ™ŸÖŸÉŸÜ ŸÖŸÜ ÿßÿ≥ÿ™ÿÆÿ±ÿßÿ¨ ÿ±ÿ≥ÿßŸÑÿ© ÿÆÿ∑ÿ£');\r\n  return 'ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ÿ∫Ÿäÿ± ŸÖÿ™ŸàŸÇÿπÿå Ÿäÿ±ÿ¨Ÿâ ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿ© ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ';\r\n};\r\n\r\n// ŸÖÿπÿßŸÑÿ¨ÿ© ÿÆÿ∑ÿ£ 401 (ÿ∫Ÿäÿ± ŸÖÿµÿ±ÿ≠)\r\nexport const handleUnauthorizedError = async (error, originalRequest, axiosInstance) => {\r\n  console.log('üîÑ ÿ®ÿØÿ° ŸÖÿπÿßŸÑÿ¨ÿ© ÿÆÿ∑ÿ£ 401...');\r\n  \r\n  // ÿ•ÿ∞ÿß ŸÑŸÖ ŸÜŸÉŸÜ ŸÇÿØ ÿ≠ÿßŸàŸÑŸÜÿß ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ™ŸàŸÉŸÜ ŸÖŸÜ ŸÇÿ®ŸÑ\r\n  if (!originalRequest._retry) {\r\n    originalRequest._retry = true;\r\n    console.log('üîÑ ŸÖÿ≠ÿßŸàŸÑÿ© ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ™ŸàŸÉŸÜ ŸÑŸÑŸÖÿ±ÿ© ÿßŸÑÿ£ŸàŸÑŸâ...');\r\n\r\n    try {\r\n      const session = sessionManager.restoreSession();\r\n      const refreshTokenValue = session?.refreshToken;\r\n      \r\n      console.log('üîç ŸÅÿ≠ÿµ refresh token:', {\r\n        hasSession: !!session,\r\n        hasRefreshToken: !!refreshTokenValue\r\n      });\r\n      \r\n      if (refreshTokenValue) {\r\n        console.log('üîÑ ŸÖÿ≠ÿßŸàŸÑÿ© ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ™ŸàŸÉŸÜ...');\r\n        \r\n        // ÿ∑ŸÑÿ® ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ™ŸàŸÉŸÜ\r\n        const response = await refreshToken(refreshTokenValue);\r\n        console.log('‚úÖ ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ™ŸàŸÉŸÜ ÿ®ŸÜÿ¨ÿßÿ≠');\r\n        \r\n        // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ™ŸàŸÉŸÜÿ≤ ŸÅŸä ÿßŸÑŸÉŸàŸÉŸäÿ≤\r\n        sessionManager.saveSession({\r\n          access: response.access,\r\n          refresh: response.refresh,\r\n          user: session.userData\r\n        });\r\n        \r\n        // ÿ•ÿπÿßÿØÿ© ÿßŸÑÿ∑ŸÑÿ® ÿßŸÑÿ£ÿµŸÑŸä ŸÖÿπ ÿßŸÑÿ™ŸàŸÉŸÜ ÿßŸÑÿ¨ÿØŸäÿØ\r\n        originalRequest.headers.Authorization = `Bearer ${response.access}`;\r\n        console.log('‚úÖ ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ™ŸàŸÉŸÜ Ÿàÿ•ÿπÿßÿØÿ© ÿßŸÑÿ∑ŸÑÿ®');\r\n        \r\n        return axiosInstance(originalRequest);\r\n      } else {\r\n        console.log('‚ùå ŸÑÿß ŸäŸàÿ¨ÿØ refresh token');\r\n        handleRefreshTokenFailure();\r\n      }\r\n    } catch (refreshError) {\r\n      console.log('‚ùå ŸÅÿ¥ŸÑ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ™ŸàŸÉŸÜ:', refreshError);\r\n      handleRefreshTokenFailure();\r\n    }\r\n  } else {\r\n    console.log('‚ùå ÿ™ŸÖÿ™ ŸÖÿ≠ÿßŸàŸÑÿ© ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ™ŸàŸÉŸÜ ŸÖŸÜ ŸÇÿ®ŸÑ');\r\n  }\r\n\r\n  // ÿ•ÿ∞ÿß ŸÅÿ¥ŸÑ ÿßŸÑÿ™ÿ≠ÿØŸäÿ´ ÿ£Ÿà ÿ™ŸÖÿ™ ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿ© ŸÖŸÜ ŸÇÿ®ŸÑ\r\n  handleRefreshTokenFailure();\r\n  return Promise.reject(error);\r\n};\r\n\r\n// ŸÖÿπÿßŸÑÿ¨ÿ© ŸÅÿ¥ŸÑ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ™ŸàŸÉŸÜ\r\nexport const handleRefreshTokenFailure = () => {\r\n  console.log('üßπ ÿ≠ÿ∞ŸÅ ÿßŸÑÿ¨ŸÑÿ≥ÿ© ÿ®ÿ≥ÿ®ÿ® ŸÅÿ¥ŸÑ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ™ŸàŸÉŸÜ');\r\n  sessionManager.clearSession();\r\n  \r\n  console.log('‚úÖ ÿ™ŸÖ ÿ≠ÿ∞ŸÅ ÿßŸÑÿ¨ŸÑÿ≥ÿ© ŸÖŸÜ ÿßŸÑŸÉŸàŸÉŸäÿ≤');\r\n  \r\n  // ÿ•ÿ±ÿ≥ÿßŸÑ ÿ≠ÿØÿ´ ŸÑÿ≠ÿ∞ŸÅ ÿßŸÑÿ¨ŸÑÿ≥ÿ©\r\n  window.dispatchEvent(new CustomEvent('sessionExpired'));\r\n  \r\n  console.log('‚úÖ ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ≠ÿØÿ´ ÿßŸÜÿ™Ÿáÿßÿ° ÿßŸÑÿ¨ŸÑÿ≥ÿ©');\r\n};\r\n\r\n// ŸÖÿπÿßŸÑÿ¨ÿ© ÿ£ÿÆÿ∑ÿßÿ° ÿπÿßŸÖÿ©\r\nexport const handleError = (error) => {\r\n  console.log('‚ùå ÿÆÿ∑ÿ£ ŸÅŸä ÿßŸÑÿ∑ŸÑÿ®:', error);\r\n  console.log('üîç ÿ™ŸÅÿßÿµŸäŸÑ ÿßŸÑÿÆÿ∑ÿ£:', {\r\n    status: error.response?.status,\r\n    statusText: error.response?.statusText,\r\n    data: error.response?.data,\r\n    message: error.message\r\n  });\r\n  \r\n  if (error.response?.status === 401) {\r\n    console.log('üö´ ÿÆÿ∑ÿ£ 401 - ÿ∫Ÿäÿ± ŸÖÿµÿ±ÿ≠ÿå ÿ≠ÿ∞ŸÅ ÿßŸÑÿ¨ŸÑÿ≥ÿ©...');\r\n    handleRefreshTokenFailure();\r\n  }\r\n  \r\n  return Promise.reject(error);\r\n}; \r\n\r\n\r\n// Ÿáÿ∞ÿß ÿßŸÑŸÇÿØŸäŸÖ ŸÇÿ®ŸÑ ŸÖÿß ÿ™ŸÜŸÇŸÑŸä ŸÖŸÉÿßŸÜ ÿßŸÑŸÖŸÑŸÅ ŸÖŸÜ config\r\n// import { refreshToken } from '../API/Auth';\r\n// import { tokenManager, sessionManager } from './cookies';\r\n\r\n// // ŸÖÿπÿßŸÑÿ¨ÿ© ÿÆÿ∑ÿ£ 401 (ÿ∫Ÿäÿ± ŸÖÿµÿ±ÿ≠)\r\n// export const handleUnauthorizedError = async (error, originalRequest, axiosInstance) => {\r\n//   // ÿ•ÿ∞ÿß ŸÑŸÖ ŸÜŸÉŸÜ ŸÇÿØ ÿ≠ÿßŸàŸÑŸÜÿß ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ™ŸàŸÉŸÜ ŸÖŸÜ ŸÇÿ®ŸÑ\r\n//   if (!originalRequest._retry) {\r\n//     originalRequest._retry = true;\r\n\r\n//     try {\r\n//       const refreshTokenValue = tokenManager.getRefreshToken();\r\n//       if (refreshTokenValue) {\r\n//         console.log('üîÑ ŸÖÿ≠ÿßŸàŸÑÿ© ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ™ŸàŸÉŸÜ...');\r\n        \r\n//         // ÿ∑ŸÑÿ® ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ™ŸàŸÉŸÜ\r\n//         const response = await refreshToken(refreshTokenValue);\r\n        \r\n//         // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ™ŸàŸÉŸÜÿ≤ ŸÅŸä ÿßŸÑŸÉŸàŸÉŸäÿ≤\r\n//         tokenManager.updateTokens(response.access, response.refresh);\r\n        \r\n//         // ÿ•ÿπÿßÿØÿ© ÿßŸÑÿ∑ŸÑÿ® ÿßŸÑÿ£ÿµŸÑŸä ŸÖÿπ ÿßŸÑÿ™ŸàŸÉŸÜ ÿßŸÑÿ¨ÿØŸäÿØ\r\n//         originalRequest.headers.Authorization = `Bearer ${response.access}`;\r\n//         console.log('‚úÖ ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ™ŸàŸÉŸÜ Ÿàÿ•ÿπÿßÿØÿ© ÿßŸÑÿ∑ŸÑÿ®');\r\n        \r\n//         return axiosInstance(originalRequest);\r\n//       }\r\n//     } catch (refreshError) {\r\n//       console.log('‚ùå ŸÅÿ¥ŸÑ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ™ŸàŸÉŸÜ:', refreshError);\r\n//       handleRefreshTokenFailure();\r\n//     }\r\n//   }\r\n\r\n//   // ÿ•ÿ∞ÿß ŸÅÿ¥ŸÑ ÿßŸÑÿ™ÿ≠ÿØŸäÿ´ ÿ£Ÿà ÿ™ŸÖÿ™ ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿ© ŸÖŸÜ ŸÇÿ®ŸÑ\r\n//   handleRefreshTokenFailure();\r\n//   return Promise.reject(error);\r\n// };\r\n\r\n// // ŸÖÿπÿßŸÑÿ¨ÿ© ŸÅÿ¥ŸÑ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ™ŸàŸÉŸÜ\r\n// export const handleRefreshTokenFailure = () => {\r\n//   console.log('üßπ ÿ≠ÿ∞ŸÅ ÿßŸÑÿ¨ŸÑÿ≥ÿ© ÿ®ÿ≥ÿ®ÿ® ŸÅÿ¥ŸÑ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ™ŸàŸÉŸÜ');\r\n//   sessionManager.clearSession();\r\n  \r\n//   // ÿ•ÿ±ÿ≥ÿßŸÑ ÿ≠ÿØÿ´ ŸÑÿ≠ÿ∞ŸÅ ÿßŸÑÿ¨ŸÑÿ≥ÿ©\r\n//   window.dispatchEvent(new CustomEvent('sessionExpired'));\r\n// };\r\n\r\n// // ŸÖÿπÿßŸÑÿ¨ÿ© ÿ£ÿÆÿ∑ÿßÿ° ÿπÿßŸÖÿ©\r\n// export const handleError = (error) => {\r\n//   console.log('‚ùå ÿÆÿ∑ÿ£ ŸÅŸä ÿßŸÑÿ∑ŸÑÿ®:', error);\r\n  \r\n//   if (error.response?.status === 401) {\r\n//     handleRefreshTokenFailure();\r\n//   }\r\n  \r\n//   return Promise.reject(error);\r\n// }; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}